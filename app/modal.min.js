var modal=(function(){var $modal=$('<div class="modal"/>'),$content=$('<div class="modal-content"/>'),$close=$('<button role="button" class="modal-close">Close</button>');$overlay=$('<div class="overlay"/>');$modal.append($content,$close);$close.click(function(e){e.preventDefault();modal.close();});$(document).click(function(){modal.close();});$(document).keyup(function(e){if(e.keyCode===27){modal.close();}});$('.share').click(function(e){e.stopPropagation();});return{center:function(){var top=Math.max($(window).height()-$modal.outerHeight(),0)/2,left=Math.max($(window).width()-$modal.outerWidth(),0)/2;$modal.css({top:top+$(window).scrollTop(),left:left+$(window).scrollLeft()});},open:function(settings){$content.empty().append(settings.content);$modal.css({width:settings.width||'auto',height:settings.height||'auto'}).appendTo('body');$('#page').css('opacity','0.2');modal.center();$(window).on('resize',modal.center);$('.modal').after($overlay);},close:function(){$content.empty();$modal.detach();$overlay.detach();$(window).off('resize',modal.center);$('#page').css('opacity','1');}};}());
